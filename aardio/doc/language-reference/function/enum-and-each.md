# 枚举与遍历

## 集合对象

集合对象在这里泛指被其他对象管理的一组具有类似行为的对象，例如桌面上的所有窗口、aardio 语言中表示复合数据的 [table 对象](../datatype/table/_.md) 。

## 枚举、遍历

在 aardio 标准库中"枚举" 一般指的是调用一个枚举函数枚举集合对象的所有元素，并使用回调函数处理枚举到的元素。

枚举的主要特点：

- 深度枚举所有向下层级的元素。
- 回调函数返回 false 停止枚举。
- 所有枚举函数使用 enum 作为函数名前缀。 

在 aardio 标准库中"遍历" 一般指的是使用 for in 语句迭代遍历集合对象。

遍历的主要特点：

- 仅遍历集合的所有直接成员，不会深度遍历所有下级元素。
- 所有遍历函数使用 each 作为函数名前缀。 


## 枚举示例

请参考：[定义函数](definitions.md)

调用 winex.enum 枚举所有桌面窗口：

```aardio
import console;  
import winex;

//枚举所有窗口（包括子窗口）。
winex.enum( 
	
	function(hwnd,depth){
		console.log( 
			depth/*深度*/,
			hwnd/*窗口句柄*/,
			win.getText(hwnd,30)/*标题*/ 
		)
	} 
)

console.pause();
```  

从上面的示例可以看出：

- enum 前缀的枚举函数会有一个回调函数用于处理枚举到的元素。
- 枚举函数是会深度枚举所有向下层级的成员。以枚举窗口为例，枚举范围包含所有顶层窗口与所有子窗口。

## 遍历示例

请参考：[泛型 for 与迭代器](../statements/iterator.md)

调用 winex.each 遍历所有顶层桌面窗口：
  
```aardio
import console;
import winex;

for hwnd,title,theadId,processId in winex.each( ) { 
	console.log( hwnd,title,theadId,processId )
}

console.pause();
```  

从上面的示例可以看出：

- 调用 each 前缀的遍历函数会创建一个可用于 for in 语句的迭代器。
- 遍历函数创建的迭代器仅仅遍历集合的直接成员，不会深度遍历所有向下层级的成员。以遍历窗口为例，仅仅会遍历顶层窗口，不会深度向下遍历子窗口。

## 迭代与枚举的主要区别

枚举与遍历有类似的语义，在 aardio 标准库中它们的主要区别下：

- 枚举一般指使用回调触发器机制来枚举集合对象的所有元素。
- 遍历一般是指用 for in 语句来循环迭代集合对象的所有直接成员（不会深度遍历所有下级成员）。  

---
- 枚举函数会深度枚举所有下级成员。
- 遍历则仅仅遍历集合的直接成员，不会深度遍历所有向下层级的成员。 

---

- 枚举可以通过返回 false 值来被动退出遍历过程。  
- 遍历时则可以调用 break 语句来主动中断遍历过程，或者在迭代器中返回 null 值以退出遍历过程。 

---

- 枚举函数使用 enum 作为名字前缀。
- 遍历函数使用 each 作为名字前缀。
